language: java
jdk:
- oraclejdk8
cache:
  directories:
  - "$HOME/.m2"
sudo: required
services:
- docker
notifications:
  email:
  - ben.gu.au@gmail.com
  on_success: always
  on_failure: always
branches:
  only:
  - master
env:
  global:
  - secure: E6WqUsvNBaznI6xiaDLzBVLr7pKGqR3uGOjBXqT5m6snZnQmH7awu364aHXgE5wte7kODIbtIhWOBFUxZqdFT6UUF/sTGrBEfVbK7H4cFNconiSoY9TJU6lll4MK/KMNHKCew4WfCDCTDefCuN4fVbMmb+hKHTGYNMo5IyzYFrpqitdt1Q3uNbu0A25tyAKluZ5eTMbO5ZG76B2eX5Pvge6h3Y0qEsCY+1vP7xcSBIEJYVw+PMfvp7DDgwkj4oAPu0wEelaxLfeCUDfkPRBAnCauyKfg1Ida1/aIieBd2xVkv+Ypm0lYnoMV/xlvuoZY6so4W7Ii3SJC7LGYVDtvcDSUY8yZVhNx8Lyf0G+PdjqoJcAkR670hwpDYAw6oe7neC4nRu+P60Z9MORe7rFSVDum0N/HZgAzDIOroZg4o00lqlH9GC/2OahLPxiq3cCl8i6lRi63m2aKHr/DNaPQ3312zoHA3G8TZYS1ZvfSLIEfCAOI4Ywz5N2CrE1vXbJX4nA/q1+R5tUwNKfB/KGC9hqHzuosBA5O1lQYJcTPLOMEH3qH1deen3T4KkjAWDhxZE93ovfmXUmZz3kMtkWXr3yEwwWM6L49QMPF0Iv+/eXOWnjYexJ0YU5hljgG96mBNhiLURRg/xDI6BsJLKBEb2fNGfp8k1crTyv7dVvjYvo=
  - secure: j97NlFyjfMEA1CDh1uPXpksrp7udS57/0DTIsIXRLUNXvn203Skm9DvUqp1wNhFSfBAhSM0xE7rsWiy23goVL8z3+pxW4DQxzi9THzB+Z76/eHr6gGfboYAI7xqxxweC89y52B3h9y3E+smFRW4HZeS4LC+nw/tXo0VQh58fbE4Ydqx0JLXEJYx0PpJ1eYEfa3U0D9OlB+c4p+KJcer3ufvnAtdOPpsnjySlzzd9cg/3H2Kgt3P2Axvk7x+nFAYlE2Ov02aO8n00MhXI1R9GkImN1wl8XCcXS7gZOXeR1Xd6WPyY5wHOiOUPZe5+NnTMNLWIWm9rfY3Tj7YGvq41JoWbP348PELaqzAb4bn6zYhjR7IMZLmBroQ3ndDNk9Ugu0TOufQIXZOEQvhcdPW80T4sVhJBprxMRpji3wp2nfk5AZ6uaW1ppbeKTCbXSNGUMY8syzcuzakNOHsw19yJDJ2bRl/6VJEV7xaSKmUYFCkGBsuUeB7deQWYzV04oC2RU4ZMXaz/l0oUy02HigPfWpuHcfuxl1rKQpkgi1HysiecQpPX+qGxnPuIkhTYqRYFTnNtaEFHgnnWdaAAHqj+7BsLECTnu83PB8eIOXu1urBHxrxFgG5Ghjv8dN14GhXTiXWmNIp0C9AwLIT4KHrUPT+x5F2Dqtb07Qmlnm1/XD0=
  - secure: km8ABs12DHC1juDJ1W6W1ekvo8E1pNxyySep2rFWsB1BLWQdK6vWNUi0EqcQVibRa/WEmSlHFZCfplkzK5ON3c1UbNMnqHkh3wNArDr8AcnaI7xRwGFxVIJtPGZVfQtma06QeXyE54pggjHMF9i9gGrNxyBIduEtX9ao1NIaUudnQiDPXAxMf9S5yrQarWnUUoNaJGU6KhY703LI5P7+znRn+GQ170J+WQdxloivfKqnrVASCHMQbkxi+KBuXhxCsRHcw/NkE9oKGlbG50UdR0LpSe4YJiuBuOXzJX2NwK0b8ycvovCalmNcqivRgNxaICiQ7wCvhxkxoP1+7zdNjGdjERIOPzGiT68r2qh47D9SDHgipjwX9IGtlXwHBgWiNLcRs+NbhJeuB5enKcSXH1+MrpERVBoO/vBWVX59iXobaA9XC9YgyYOOmBHkX7Ajk/2CUA/ADqKpeAbIBW2lpUft2Ni+5bWkjDVe7DetjwSYU/Gj6FRFtU3jsMTNitSmnbK6e/5DcPc3odxwsLKUgZiXU8RahiYIkesCm042Uu+sdcJ7SvxFGF6EkJPbtMxWuLi+Nza6c+uuKSQuOOGyKTTUmQxNf+BZIchdZM5bWOr6aH2ISzoAl44Of/OlkXrZmhm1QS+OkIN8fbivkXxWhQXJE7H2jeswV5WLfpZ7dgY=
  - secure: KOnFu91uxkxVpIgztouC6pHYYQBlbkifZ6vB3THU3RVh8DN5a2Q2jKJ9lqq5eDQn8csgNktDrAEXaSjVhychCXdAZelrk6LrTESeNG3pH60/fyxFvOuuJhE3lyTVMNL1uczJk4SShsUrJWKvO60GHh+ZGLDdcO/hq3K/RuQofMsmDeSiDlL/QW6eo2uoAD7JlSUvGdyJBpA0l0kMXvdLRhDoxQMjAUUKZQBt9wHPWiajqtDTlkLTV++mDsIzqZ+a98ZERtwoSSdUxWx4A4i3/UmhBL0YpHz0zCFD+3wYJODwTanQLpv2bbNBKyvRFvdSZqtzuTN/uIsxDlHUmtLGaO8QvASbTV29tNK5XFnUG80LpyLRysJVQPQqJhX4nH6zUrMuqc7mpF1XBcTTLnzhnmEYH0MuYSOdEQKAWfgXP2PmV6/F+lNcILgHv4DcX5yha0zCGnv3sKE3F3SeSYqzCtBrcISVLKyuPkO8qMdaGAeJPtdvknLrm4nNjXbBtEyrz145UkBh5uua/CXXrheDsKZudRRVjqTtbvYZ4nojqidb1H8a/v0yPixL+i/0z/RynRQ02h+VxESzA5Tv6CZOzjvkCPjY5DYq7KOPJNtoKbrD5+23Y5+UN6/Og6C8eef6mIirY+NE5qJxPUoNfA6FCFW0W1SSJpW4mme6e+a0n9w=
  - secure: IMo6+b8kxTXhavolsJQDwWPm5rKZfadUJu6U0sG/prFWi+wzMXln5XpASiiHomzDKQ3XYp6jrn8nU66R/H2Usv2Q9U/ikLevTXY4UGGxbzCU8j/yCOSzzZyD5K6XlvhFmqZClAuVCw8CRyzXMuBbq9dmZqOg+c5axlcLXH+W6raYWsS8t/kZuzVtp4thWX/7vOToxR7wZr8zQ+w/v8khXs9rs69fIv1YDPx+I8+spheFXGDsyI2bM+ZOxMbQxNHWtpsQpde6XIfaHo6cBUgx7C8Z8dr2/x3xGrDQ7SVzGw865fuEEaGs9wYa5C212NIPAeeA2ZIoob2qK2C+CA6N2wByZ/bGWXTTF0VzNIoiVZfZZuI60Jxk4wboCM5Ivdk2jxyEIFwPDfduarGIeSnooJo6dVj2jye/l46yF6Dzkwv9ZgpkMKch7tF/eftsY/BwTM8m0nKYcVbwpT5M9bmrQZCzrJfYqLJfASsM8B0mxkFD2Owtwswdw2C4MhtvcGwvOpMn4Td/sMv+QODNnEn9/yQX4iOAqtTU3m8VhqOOHqzPN/UcjW/Ro5vcDmY232zZljUYdcYyOrphheJJ/iMwk0YlLz+rIEATNSOSb9aD4hTMtinHMXxxe5FyZiZ7Upk2vnuMogjbQ0hvEWAkXYh2DRlKwiiNyPi0+MHWF5kdb60=
  - secure: wO3kNwIDnQiGWXMufl1taDh+stJbL9CilkG0CFwqoH5oCWefKreLvWedE4w1MWMyngWzUAeKqwy3SDiLRgxsllE41wi/PDm7iubLcYP5W8Y/JKmDz0RzQGoJyCZ/jX7JwnP+qsvvQH1iaRhcN7lz20rApseMamxBvGQ/WXSpKgbOIp/6EC1XLfnpiTMKrzjK66XYapvvtc9tImT/MKb9wvUc/z6yx52qrm/OJij+8okPSM7Ex8vA9Ks9BGFX5ou/FeSgKHK/NhuyabKa4GP5m11KewPUikbLTu09VBhOQaFZUT8I6w3CZGbyUVkJvd3jbZLc4Cf1IQFxxNuiIaUeelPoy35Z/YYlBhvE5r44vAagiSH0rvxZmn9DMgKdZs/M4RbblgWuJpKgfMmzYUEM7ynpeFZtFeWyLpGIwKBAd5Vrn6mBA93GFTPcMCalLYtUyEgbS9PZ5rBlb7f4lv71Wuht6QOtB6otc7XOcOxaXXbBLjWcqXdtupYM3tNdyUTbb3GyAKPOyfXsXyaZjqLwLAwASwf0SEjesunF9iTcM6o5egWg4Yr5DEmVuYlV15k1RdbKYBsOFFuEh9tJSwWmZYODqDmb3qWfe6sH5r+6J+f9o8ZIPyOu9Tic4IMS3hD95vrNeY2BkhqoiDpfIagqbH0PZ8rPS7yLxkR31jHqmzI=
  - secure: g3fMGdKUxAwaER5AmLOxvQqQI70u4T5HoUI+FBCpN8mkYGlodnz88RgKsfStMknILJ5razcJnHMmt3G4S4LQJX71O7E47L5LfJRHtG8MuBORqtUVUprSmr6L+Ts3w6GZEa81L8sVAbHORpV88wgOGfJY8B++SwJAi3iYB/RPa1M8iHEP7umowvyYMpVubJLU/yb7XmO98+GKzeDZftoolmnUIk6mR2RBoqNdo8wQ5GjUqwg47GSo/v13JhivQ1h9o+R+Nq32lT/o1ap9XD3jQK/6if4MYQa6U02dgjIrBXj3Z/r8Py4SAL7fSwAZXwQKJ8DPSBYBKAYZ+jSEdTt4pDaewFk3l/hwpIQHs99ntB6ZlboeapmTYNiXBKMi5KouJiqFpleNV5RBx4mJvha1PXC8Cfrg3NjuhVrNQp5u6JEm5wlN0ec+1UoNefyBpVp7tDAWbB1ZnunitO8FWrJtQIhu+L4r1liVrZ/hPqBw1LeiGEp7xbZxhr5hKZ5tTYy1dwVq/s5Cj7JAo3IX4XOGJU7xX9YLYHeHsl25WwSBru/Xd3SipegTkM5GJsEWW7P3DZeg6SZ4dIAQK54xAoTzCYryRdCCz+wV7eZxJ9WsfQwuMiR1sV/KiriVpvtzam2W7/L/k3Roc0k31wl77DwITeDV8MEchbK9FTlRi/J9KPA=
  - secure: gK13VbBveMlk/kYgVFSpnN+R51VctLjwIKUg7+VPAp6DkSqF/W6P7Xfy0NxFMdl1RE7kKJCS9H5BzJqxR38iOKpKNs8W9AeRlPC6TtRgz8/FXkZreU+YCOVkuQtje6EEVRX/O2ZElAVrlAf16DkSQ+dIno6IHor/fjVhIVlw1P/rvQbzPemOUD8qxSluhw9NU4uipbVwKDcuiWgLLwu4KP4RzOlHZY0ZGbt5Qhgowy1J4DgzsIvhzD6l80fiUV1tR0822OMFpSJCw7GTaDETHJ6zzmASO5Rk6Mm94LOyNuSfINZddL4qNdbqouLeOR0uvGIbaBW1nuFvSZN1lDSqISswxFuOA2cWYMSrs9zGMqqXEVwEa2EqWo0k9TexZ37z0iwq8GtzByuKw9AvNLWUBRHvDXyxRYdoagHlKyZyJJLLz1NGTLplmNxjbwzINABnSlL5CKvsTPGSdHDRXXC94xX2Fs/3AjtPoqcmQLrIzAjen5M3mbC5X6LD9CLbtM4QefLAVu5d3ItmN0g8NnXA0loebjZLsahB5nCxDvaUXRFey5KaA4JFckghrVQKvev2N2H8JxtN36edh8aY3TMrAid/BGqXLSRWN/29K2ctsFSMrwX1TM61a+eV8/GcL9NvV5UAUL0IQ6Bf90sKwbrigB0RZ2t/qAaRt9vZPcNYtQs=
  - secure: lcdvXmb2TjmQOcgNrrz9ccy+LL+71ktBFLkBGn9OEEIje+n//8AKr0nxA+VCmZdPYm6Y11wQHfpAwtPMUsRzmhV7HNRnKPUr0NGhwZKFqs3WfyLJMIVWTVghScpx1mgTnU7+22o20YQP4XxACjkFztMVybahOTc61EISygZuj4sZB95AlF9CZDJIiJR6NGB4yHlbZJHeRqcbqR1jBpCtjr1OC9UvFo7gQCJ6eb9jUcFXiU6/usZi3UsUdR5wWJaV9BubOs8I0A+y9ym5lD4JUhQeev93b+zT3q8fs06K420+tFUxwV7tEmiSnXJor1amCealavHWgPpxrDzEX4vTWx2yapz1rPjIm/BxXu/rTZhEIAZxUs6DtVzNC/YHPJpIWs8t8brUHhB5Pf/qrOg3p13jwAK5mNARKTO1+GezTTWc8bK5MbZEUalTUocaDunzdBdW1U2d7e1LHWB8ssKPtEcJBWoadl/Iaper0pCogon/F2t5pKumgZ1dI98Y8vSBmxOfCEEVvmXjYGGHBoZi0veHAoUmZKcxXjQE+mxKDqWEKWsfzxQwQc5bf5WxxH4CIR4fxJfaw5HSxuLBtrhTiMrQgVZOAWZ7t227i8sK5omsrSBoaytRmqQxF4lIEALPjjCMRXR+YhhNKeXFt+sFIt9hgOelxlUkA9nbYLOSmO8=
  - secure: jjlB9FO7nO5YnkJmz99isM/kzRZq/rYi6VNtl/xwkLvydoZNrrJEvcyjthu5XEj6yvTkIJzQSa9VoMl1Yox497r3skbaHn+ITiUDCaPmd8DXlSZtlsDYnzBsO3FMdj6xm6nrBkaNsfI/yX5ojVh+iulcYeUY56pMKCX2b4AVMbfVw8N0vV9ZAkIiOQwobhy64cUDy86TH8Alx2HDTfzYt28mKZjp+aGkAhZgp7rUejPdkmBiU456I+D+EV2W4rSdcyEOlGhMRMOWFFt36NNRkVFxv0kSugeHYHkpfWc7WihNd4YvmZXoueFyj+tHt/xnGpvmJa7C5oVC+eBxzAtEr7Kno5bjS/23klug64plRKXRN+Yt3gJA47itffK8XRLkRhAuNl6D9Ui5Pw8TuycZAc66RZEq86+WGbB4wrWSCZ5VMZgqA5+bVVDzLVRyj6QamzhDh8wmgiQPXwbpejBFu2PU+0y1gRyBMANvBlfmKmLSkMsAZIIECpomdBEa5NNp7VF08HEvq1hrh9xWt/RRDyeImVgQTzjaBsro7kiFgg0w3toMHAj7YUmgOj8kIpRnPGDOR0QU4tSEAfj5qpYMIJQ95VcU6eGQYNzqad1m8/8affpf2T/u6YDQhULaXFNcIFDKp58YTlBmWXCPj3rOj7pvEpJLP8I2sNagJfSwxAs=
before_install:
- gem install travis -v 1.8.5 --no-rdoc --no-ri
- sudo curl -k -o /usr/local/bin/ecs-cli https://s3.amazonaws.com/amazon-ecs-cli/ecs-cli-linux-amd64-latest
- sudo chmod +x /usr/local/bin/ecs-cli
- export BUILD_NAME=chapter10-$TRAVIS_BRANCH-$(date -u "+%Y%m%d%H%M%S")-$TRAVIS_BUILD_NUMBER
- export CONTAINER_IP=54.215.193.139
- export PLATFORM_TEST_NAME="chapter10-platform-tests"
script:
- sh travis_scripts/tag_build.sh
- sh travis_scripts/build_services.sh
- sh travis_scripts/deploy_to_docker_hub.sh
- sh travis_scripts/deploy_to_amazon_ecs.sh
